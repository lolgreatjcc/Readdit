<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="../includeHTMLs/head.js"></script>
    <script src="../includeHTMLs/header.js"></script>


    <title>Community</title>
</head>

<body>
    <div class="container-xxl">
        <div class="row">


            <div class="col-1">
                start
            </div>
            <div class="col-11">
                end
            </div>
        </div>
    </div>
    <div class="container-xxl my-md-4">
        <div class="row">
            <div class="col-lg-8" id="main_column">
                <div class=" bg-white body-borders px-3 py-2 mb-3 rounded shadow-sm">
                    <form>
                        <div class="d-flex">




                            <div class="input-group">
                                <button class="btn btn-outline-secondary dropdown-toggle" type="button"
                                    data-bs-toggle="dropdown" aria-expanded="false">r/all</button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#">Action</a></li>
                                </ul>
                                <input class="form-control col-8" placeholder="Create Post">

                            </div>
                            <a href="#" class="px-3 py-1 mx-2 icon-hover rounded-3"><i
                                    class="far fa-file-image align-middle text-dark"></i></a>
                            <a href="#" class="px-3 py-1 mx-2 icon-hover rounded-3"><i
                                    class="fas fa-paperclip align-middle text-dark lh-inherit"></i></i></a>
                        </div>
                    </form>
                </div>




                
            </div>
            <div class="col-lg-4">
                <div class="bg-white body-borders rounded shadow-sm mb-3">
                    <div class="invert-scheme p-2 py-3 rounded-top" id="about_community_header">
                        <div class="ms-2">
                            <h6 class="fw-bolder text-white mb-0" id="community_name"></h6>
                            <small class="fw-normal">r/<span id="subreaddit_name"></span></small>
                        </div>

                    </div>
                    <div class="p-2">
                        <a class="btn btn-dark body-borders rounded-pill invert-scheme fw-bold w-100">Join Community</a>
                    </div>
                </div>
                <div class="bg-white body-borders rounded shadow-sm">
                    <div id="about_community_header" class="p-2 py-3 rounded-top">
                        <h6 class="fw-bold text-white mb-0 ms-2">About Community</h6>
                    </div>
                    <div class="p-2">
                        <p id="community_desc">Short description about subreaddit</p>
                        <p class="text-center mb-0">##</p>
                        <p class="text-center">Members</p>
                        <hr />
                        <div class="d-flex flex-row align-items-center mx-3">
                            <i class="fas fa-birthday-cake fa-xl text-scheme"></i>
                            <p class="ms-2 mb-0 fw-bold text-scheme">Created</p>
                            <p class="ms-1 mb-0" id="community_create_month">MMM</p>
                            <p class="ms-1 mb-0" id="community_create_day">DD</p>
                            <p class="mb-0">,</p>
                            <p class="ms-1 mb-0" id="community_create_year">YYYY</p>
                        </div>
                        <hr class="mb-2" />
                        <a class="btn btn-dark body-borders rounded-pill invert-scheme fw-bold w-100">Create Post</a>
                    </div>
                </div>
            </div>

        </div>

    </div>
    <script>
        $(document).ready(function () {
            var query = window.location.search;
            console.log(query)
            $.ajax({
                url: `http://localhost:3000/search` + query,
                method: 'GET',
                contentType: "application/json; charset=utf-8",
                success: function (data, status, xhr) {
                    var subreaddits = data.Result;
                    console.log(subreaddits)
                    for (var i=0;i<subreaddits.length;i++){
                        console.log(i)
                        $("#main_column").append(`
                            <div class="post rounded">
                                <div class="row g-0">
                                    <div class="col-12 bg-white p-2">
                                        <div class="d-flex flex-row align-items-baseline">
                                            <a href="/r/${subreaddits[i].subreaddit_name}"><h6 class="d-inline fw-bold clickable-link">r/${subreaddits[i].subreaddit_name}</h6></a>
                                            <p class="fw-light text-secondary mx-1">•</p>
                                            <p class="fw-light text-secondary mx-1">•</p>
                                        </div>

                                        <h5>${subreaddits[i].subreaddit_description}</h5>
                                    </div>
                                </div>
                            </div>
                            `)
                    }
                 
                },
                error: function (xhr, status, error) {
                    console.log("Error: " + error)
                }
            })
        })
    </script>
</body>

</html>